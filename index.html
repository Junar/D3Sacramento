<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Junar D3</title>

<link href="css/viz.css" rel="stylesheet">
<script type='text/javascript' src='js/jquery-1.11.3.min.js'></script>
<script type='text/javascript' src='js/underscore-min.js'></script>
<script type='text/javascript' src='js/backbone-min.js'></script>
<script type='text/javascript' src='js/d3.min.js'></script>
<script type='text/javascript' src='bb/junarData.js'></script>

</head>

<body>
<h3>Junar D3</h3>
<button id='getRealData'>Update random data</button>
<div id='d3Chart' style="width: 800px; height: 500px;"></div>

<script type="text/javascript">

$(function() {
	jdm = new junarDataModel({the_matrix: []});
	jdv = new junarDataView({model: jdm});

	jdm.set('the_matrix', [ ['Year', 'BUDGET AMOUNT', 'Id'], ['2014', 22222, 3333], ['2015', 23222, 4333], ['2016', 24222, 5333] ]);

	$('#getRealData').on('click', function(){
		// random file
		file = Math.floor((Math.random() * 4));
		jdm.set('url', 'data/CITY-OF-SACRA-PROPO-BUDGE-limit-50' + file + '.json');
		// http://api.data.cityofsacramento.org/datastreams/invoke/CITY-OF-SACRA-PROPO-BUDGE?auth_key=83188724f203014ccc3165df68769d21273b625e (&limit=500)
		//define group field
		jdm.set('group_column', 'Year'); 

		//define SUM field
		jdm.set('sum_columns', ['BUDGET AMOUNT', 'Id']);

		//define fields function
		jdm.set('x_axis', 'Year');		

		jdm.updateMatrix();
		
	});

});

</script>
</body>

</html>